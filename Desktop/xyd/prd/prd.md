# 小约定App - MVP产品需求文档

## 一、产品概述

### 1.1 产品定位
小约定App是一款专注于**情侣和亲子关系**的约定管理工具，通过结构化记录、端侧AI辅助和亲友见证机制，帮助用户将口头承诺转化为可执行、可追踪的约定，提升亲密关系中的信任与执行力。

### 1.2 目标用户
- **核心用户**：情侣（25-35岁）、亲子家庭（30-45岁父母）
- **次要用户**：自律人群、朋友小组
- **用户规模**：MVP阶段目标10万用户

### 1.3 核心价值
- **明确化**：将模糊的口头约定转为清晰的执行计划
- **可追踪**：打卡记录和进度可视化
- **有温度**：亲友见证增加仪式感，而非冰冷的工具
- **智能化**：AI辅助降低使用门槛
- **个性化**：每种关系类型都有独特的UI体验和互动方式

## 二、MVP功能范围

### 2.1 包含功能 ✅

#### 核心功能
1. **约定创建与管理**
   - 快速创建约定（模板/自定义）
   - 约定状态管理（7种状态流转）
   - 打卡与证据上传

2. **双模式执行**
   - 软提醒模式：仅推送提醒，无强制要求
   - 硬执行模式：需上传证据，见证人确认

3. **亲友见证机制**
   - 邀请1-3位共同认识的亲友
   - 轻量化见证（知晓→提醒→确认）
   - 无金钱激励，纯情感支持

4. **端侧AI辅助**（必备功能）
   - 自然语言转结构化约定
   - 智能模板推荐
   - 约定内容补全
   - **不允许降级，必须成功加载**

5. **关系管理系统**
   - 多维身份支持（亲子、情侣、健身伙伴、读书会等）
   - 关系专属UI主题（自动切换视觉风格）
   - 关系专属数据展示：
     * 情侣：甜蜜指数、纪念日、共同回忆
     * 亲子：成长树、能力培养、成长相册
     * 健身：能量值、运动PK、身体数据
     * 读书：知识图谱、阅读进度、笔记分享
   - 0-100分履约分（仅显示星级）
   - 最近30天滚动计算

6. **基础通知系统**
   - 三级优先级（紧急/重要/普通）
   - 免打扰时段设置
   - 智能聚合推送

### 2.2 不包含功能 ❌

- ❌ 支付系统（押金、罚金等）
- ❌ 陌生人社交（公开广场、社区等）
- ❌ 复杂信誉体系（多维度评分、等级权益）
- ❌ 见证人市场（专业见证人、佣金机制）
- ❌ 区块链/智能合约
- ❌ AI云端API（仅端侧推理）
- ❌ 企业级功能

## 三、产品特色

### 3.1 差异化优势
- **真实关系**：基于亲友关系，非陌生人平台
- **端侧AI**：隐私保护，离线可用
- **轻量设计**：专注核心场景，避免功能膨胀
- **情感驱动**：强调温度和仪式感
- **多维体验**：每种关系类型都有独特的沉浸式UI体验
- **故事记录**：约定不只是任务，更是关系成长的故事

### 3.2 设计原则
1. **简单优先**：3步完成约定创建
2. **隐私第一**：数据本地化，端侧处理
3. **正向激励**：鼓励为主，避免惩罚
4. **真实可信**：亲友见证，非算法判定

## 四、技术方案

### 4.1 技术栈
- **前端框架**：Flutter 3.27.3（跨平台）
- **支持平台**：iOS、Android、微信小程序
- **端侧AI**：阿里Qwen 0.6B量化模型（INT8，约600MB）
- **后端服务**：Firebase/国内云服务（轻量级）
- **数据存储**：本地SQLite + 云端同步

### 4.2 关键技术点
1. **离线优先**：本地数据库 + 冲突解决机制
2. **模型部署**：首次强制下载，本地持久化
3. **数据同步**：版本向量时钟 + 增量同步
4. **性能优化**：模型预热、推理缓存、批处理

### 4.3 技术挑战
- 端侧模型在低端设备的性能
- 多设备数据同步冲突
- 模型文件大小与下载体验
- 小程序平台限制

## 五、商业模式（未来）

### 5.1 MVP阶段（免费）
- 所有功能免费开放
- 专注用户增长和产品打磨
- 收集用户反馈优化体验

### 5.2 商业化探索（Phase 2）
- **增值服务**：高级模板、数据报告、云存储扩容
- **会员体系**：去广告、专属功能、优先客服
- **B端服务**：企业团队版、API接口
- **硬件结合**：智能手环打卡、家庭显示屏

## 六、成功指标

### 6.1 北极星指标
- **月活跃用户数（MAU）**：目标3个月达到5万

### 6.2 关键指标
- **约定完成率**：>60%
- **用户留存率**：次日>40%，7日>20%，30日>10%
- **见证人参与率**：>30%的约定有见证人
- **AI功能使用率**：>50%用户使用AI辅助

### 6.3 质量指标
- **崩溃率**：<0.5%
- **AI加载成功率**：>99%
- **同步成功率**：>95%
- **用户满意度**：>4.0分

## 七、风险与对策

### 7.1 技术风险
- **风险**：端侧AI性能不足
- **对策**：模型量化优化，设备要求说明

### 7.2 产品风险
- **风险**：用户觉得太"重"
- **对策**：强化轻松有趣的内容，避免压力感

### 7.3 运营风险
- **风险**：冷启动困难
- **对策**：KOL合作，情侣/育儿社区推广

### 7.4 合规风险
- **风险**：未成年人使用
- **对策**：年龄验证，家长模式

## 八、产品路线图

### Phase 1 - MVP（1-3月）
- ✅ 核心功能开发
- ✅ 端侧AI集成
- ✅ iOS/Android双端上线
- ✅ 种子用户内测

### Phase 2 - 增强版（4-6月）
- 微信小程序版本
- 数据分析报告
- 社区运营活动
- 商业化试点

### Phase 3 - 生态构建（7-12月）
- 开放平台API
- 第三方集成（日历、健康等）
- 企业版本
- 国际化准备

## 九、团队需求

### 9.1 MVP阶段（5人）
- 产品经理 ×1
- Flutter开发 ×2
- UI设计师 ×1
- AI工程师 ×1

### 9.2 扩展阶段（+5人）
- 后端开发 ×2
- 运营 ×2
- 客服 ×1

## 十、附录

### 相关文档
- [产品设计文档](./design.md)
- [详细设计文档](./design_detail/)
- [关系型UI/UX设计](./design_detail/07_关系型约定设计体系.md)
- [技术架构文档]（待补充）
- [UI设计规范]（待补充）

### 竞品分析
- **小目标**：功能复杂，偏工具化
- **恋爱清单**：仅情侣场景，无AI
- **番茄TODO**：个人向，缺少社交属性

### 用户调研
- 深度访谈：20位目标用户
- 问卷调查：500+样本
- 核心洞察：用户需要的不是工具，是关系维护

---

*文档版本：v1.0.0*  
*更新日期：2024-01-15*  
*负责人：产品团队*