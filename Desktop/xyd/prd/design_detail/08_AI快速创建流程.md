# 小约定App - AI快速创建流程设计

## 一、设计理念

### 核心原则
- **极简输入**：一句话创建约定，降低使用门槛
- **智能理解**：AI自动提取关键信息，减少用户操作
- **一次展示**：所有待补充项一屏呈现，避免多步骚扰
- **灵活调整**：预填充建议值，但允许自由修改
- **快速完成**：最快一键创建，最多2-3次点击

## 二、创建流程详解

### 2.1 入口设计

```yaml
首页入口:
  主按钮:
    text: "说说你的约定"
    icon: "✨"
    style: "悬浮大按钮"
    position: "底部中央"
  
  快捷入口:
    - 语音按钮: "🎤 按住说话"
    - 相机按钮: "📷 拍照创建"
    - 历史按钮: "🕐 最近使用"
```

### 2.2 自然语言输入

#### 输入界面设计
```yaml
输入区域:
  顶部提示:
    text: "告诉我你想做什么"
    examples:
      - "我要和女朋友一起看完《三体》"
      - "每天早上6点起床跑步"
      - "这个月要减重5公斤"
      - "和孩子每天练习英语30分钟"
  
  输入框:
    placeholder: "比如：我要和老婆一起..."
    features:
      - 智能联想
      - 历史记录
      - 语音输入
      - 表情符号
  
  快捷模板:
    layout: "横向滑动卡片"
    templates:
      - name: "情侣约定"
        icon: "💑"
        hint: "和TA一起..."
      - name: "健身计划"
        icon: "💪"
        hint: "运动目标..."
      - name: "学习目标"
        icon: "📚"
        hint: "学习计划..."
      - name: "亲子任务"
        icon: "👨‍👩‍👧"
        hint: "和孩子..."
      - name: "个人目标"
        icon: "🎯"
        hint: "我要..."
```

### 2.3 AI解析引擎

#### 信息提取规则
```javascript
// AI解析逻辑
AIParser = {
  // 实体识别
  extractEntities(input) {
    return {
      // 参与人识别
      participants: [
        { role: 'initiator', name: '我' },
        { role: 'participant', name: '女朋友', relation: 'couple' }
      ],
      
      // 时间识别
      timeline: {
        deadline: '2024-02-15',  // 解析"下周五"
        frequency: 'daily',      // 解析"每天"
        duration: '30min'        // 解析"30分钟"
      },
      
      // 目标识别
      goal: {
        action: '看完',
        object: '《三体》',
        type: 'completion',
        measurable: true
      },
      
      // 关系类型推断
      relationship: {
        type: 'couple',
        confidence: 0.95
      }
    }
  },
  
  // 缺失信息检测
  detectMissing(entities) {
    const missing = [];
    
    if (!entities.timeline.frequency) {
      missing.push({
        field: 'frequency',
        question: '多久执行一次？',
        options: ['每天', '隔天', '每周', '一次性'],
        default: '每天'
      });
    }
    
    if (!entities.reminder) {
      missing.push({
        field: 'reminder',
        question: '什么时候提醒？',
        options: ['早上', '中午', '晚上', '不提醒'],
        default: '晚上20:00'
      });
    }
    
    return missing;
  }
}
```

### 2.4 一次性补充界面

#### UI布局设计
```yaml
补充界面:
  # 顶部：已识别信息
  识别结果:
    style: "成功卡片"
    color: "绿色渐变"
    content:
      - "✅ 参与人：你和女朋友"
      - "✅ 目标：看完《三体》"
      - "✅ 截止：2月15日"
  
  # 中部：需补充信息（一次性展示）
  补充表单:
    布局: "分组卡片"
    
    执行计划组:
      - field: "每日目标"
        type: "slider"
        label: "每天看多少页"
        range: [10, 100]
        default: 50
        unit: "页"
      
      - field: "执行时间"
        type: "time_picker"
        label: "什么时候看书"
        options:
          - "早晨 6:00-7:00"
          - "午休 12:00-13:00"
          - "晚上 20:00-21:00 ⭐"
          - "睡前 22:00-23:00"
        default: "晚上 20:00-21:00"
      
      - field: "打卡方式"
        type: "multi_select"
        label: "如何确认完成"
        options:
          - "拍照打卡"
          - "读书笔记"
          - "互相确认"
        default: ["互相确认"]
    
    提醒设置组:
      - field: "提醒开关"
        type: "switch"
        label: "开启提醒"
        default: true
      
      - field: "提醒时间"
        type: "select"
        label: "提前多久提醒"
        options: ["10分钟", "30分钟", "1小时"]
        default: "30分钟"
        dependency: "提醒开关=true"
    
    见证设置组:
      - field: "见证人"
        type: "optional"
        label: "邀请见证人（可选）"
        placeholder: "选择好友"
        action: "open_contact"
  
  # AI建议区（可收起）
  AI建议:
    style: "提示卡片"
    collapsible: true
    content:
      - "💡 建议设置每日打卡，更容易坚持"
      - "💡 可以设置阶段性目标，如每周完成3章"
      - "💡 晚上8-9点是最佳阅读时间"
  
  # 底部：操作按钮
  操作栏:
    primary_button:
      text: "采纳建议并创建"
      icon: "✨"
      action: "create_with_suggestions"
    
    secondary_button:
      text: "直接创建"
      action: "create_as_is"
    
    tertiary_button:
      text: "返回修改"
      action: "back_to_input"
```

### 2.5 智能拆分生成

#### 里程碑自动生成
```yaml
里程碑生成规则:
  示例输入: "一个月看完500页的书"
  
  生成结果:
    - week_1:
        goal: "完成第1-125页"
        checkpoint: "第7天"
        reminder: "本周进度25%"
    
    - week_2:
        goal: "完成第126-250页"
        checkpoint: "第14天"
        reminder: "已完成50%"
    
    - week_3:
        goal: "完成第251-375页"
        checkpoint: "第21天"
        reminder: "进度75%"
    
    - week_4:
        goal: "完成第376-500页"
        checkpoint: "第30天"
        reminder: "最后冲刺"
```

#### TODO列表生成
```yaml
TODO生成:
  基于: "每天晚上8点看书50页"
  
  每日TODO:
    - time: "19:30"
      task: "准备看书环境"
      type: "reminder"
    
    - time: "20:00"
      task: "开始今日阅读"
      type: "action"
    
    - time: "21:00"
      task: "完成50页并打卡"
      type: "checkpoint"
    
    - time: "21:15"
      task: "分享今日读书心得"
      type: "optional"
```

## 三、交互细节优化

### 3.1 智能键盘
```yaml
键盘优化:
  顶部工具栏:
    - 常用词汇: ["每天", "一起", "完成", "学习"]
    - 时间快捷: ["今天", "明天", "本周", "这个月"]
    - 数字快捷: ["30分钟", "1小时", "1周", "1个月"]
  
  智能联想:
    - 输入"我要": 联想["减肥", "学习", "运动", "读书"]
    - 输入"和": 联想["女朋友", "老婆", "孩子", "朋友"]
    - 输入"每": 联想["每天", "每周", "每月"]
```

### 3.2 语音输入
```yaml
语音识别:
  触发方式: "长按麦克风按钮"
  
  实时反馈:
    - 波形动画显示
    - 实时转文字显示
    - 关键词高亮标记
  
  智能纠错:
    - 自动纠正常见错误
    - 识别专有名词
    - 保留语气词过滤
```

### 3.3 视觉反馈
```yaml
动画效果:
  输入时:
    - AI头像呼吸动画
    - 文字输入波纹效果
  
  解析时:
    - 加载进度条
    - 文字扫描动画
    - 关键词提取高亮
  
  完成时:
    - 成功勾选动画
    - 卡片展开效果
    - 庆祝粒子效果
```

## 四、使用场景示例

### 场景1：个人健身目标
```yaml
用户输入: "我要每天早上跑步5公里"

AI解析:
  参与人: 仅自己
  目标: 跑步5公里
  频率: 每天早上

自动补充:
  - 具体时间: [6:00⭐, 6:30, 7:00]
  - 打卡方式: [运动数据, 跑步轨迹, 自拍]
  - 天气处理: [雨天改室内, 跳过, 延后]

生成结果:
  - 每日提醒: 5:30起床，6:00跑步
  - 每周总结: 本周完成X公里
  - 月度目标: 总计150公里
```

### 场景2：情侣共同目标
```yaml
用户输入: "和女朋友一起存钱买房"

AI解析:
  参与人: 我、女朋友
  目标: 存钱买房
  类型: 长期目标

智能追问:
  - 目标金额: [输入框]万元
  - 每月存款: [输入框]元
  - 完成时间: [日期选择]

生成结果:
  - 月度目标: 每人存X元
  - 进度追踪: 已完成X%
  - 里程碑: 10万、20万、30万...
```

### 场景3：亲子教育
```yaml
用户输入: "陪孩子每天练琴"

AI解析:
  参与人: 我、孩子
  目标: 练琴
  频率: 每天

智能建议:
  - 练习时长: 30分钟（6-8岁建议）
  - 最佳时间: 晚饭后1小时
  - 激励方式: 贴纸奖励、积分兑换

生成结果:
  - 每日任务: 基本功15分钟+曲目15分钟
  - 每周回顾: 本周练习情况总结
  - 成长记录: 自动生成练琴视频集
```

## 五、技术实现要点

### 5.1 本地AI模型
- 模型选择：阿里Qwen 0.6B量化版
- 推理优化：缓存常用模板，批处理请求
- 离线能力：本地完成所有解析，无需网络

### 5.2 性能优化
- 输入防抖：300ms延迟处理
- 增量解析：实时解析但不阻塞输入
- 预加载：预热常用解析模板

### 5.3 数据安全
- 本地处理：所有数据不上传服务器
- 加密存储：敏感信息加密保存
- 隐私保护：不收集用户输入习惯

## 六、成功指标

### 用户体验指标
- 创建时间：平均<30秒完成创建
- 点击次数：平均<5次点击
- 成功率：>95%成功创建约定

### AI性能指标
- 解析准确率：>90%正确识别
- 响应时间：<500ms完成解析
- 建议采纳率：>70%采纳AI建议