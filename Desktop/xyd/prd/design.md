# 小约定App产品设计文档

## 产品概述
小约定App旨在帮助用户记录并执行那些日常生活中非正式的"口头约定"。通过结构化、清晰的记录方式，结合端侧AI与提醒机制，提升亲密关系与团队之间的信任与执行力。

## 核心功能架构

### 1. 首页
- **顶部轮播**：展示推荐模板（情侣约定、亲子任务、自律目标）
- **快速入口**：一键发起新约定按钮，放置中间
- **我的快捷区**：展示今日需执行的约定卡片（可打卡）
- **通知提醒图标**

### 2. 创建约定页
- **选择模板/自定义**：两种模式切换
- **智能关系识别**：自动识别邀请对象关系类型
- **个性化模板库**：基于关系类型筛选适配模板
- **填写约定信息表单**：名称、参与人、截止时间、执行条件等
- **证据要求设置**：
  - 指定需要的证据类型（图片/视频/文字/位置）
  - 设置证据上传频率要求
  - 定义验收标准和评判规则
- **AI建议按钮**：自动补全约定内容（调用端侧模型）
- **模式选择**：软提醒 or 硬执行（卡片式切换）
- **见证人邀请功能**：输入手机号/微信昵称，自动匹配关系类型

### 3. 约定详情页
- **头部约定信息**：状态、倒计时展示
- **执行进展**：用户打卡、上传图片或文字
- **证据上传系统**：
  - 图片证据：拍照/相册选择，支持多张
  - 文字说明：补充描述执行情况
  - 语音记录：快速录音说明（60秒内）
  - 位置信息：可选的地理位置证明
- **见证人反馈入口**
- **修改按钮**：仅限草稿状态

### 4. 我的页面
- **关系分组展示**：
  - 情侣约定区域：💕标识，粉色主题
  - 亲子约定区域：👨‍👩‍👧‍👦标识，温馨主题
  - 朋友约定区域：👥标识，活力主题
  - 个人目标区域：🎯标识，专注主题
- **进行中约定**：按关系类型分组展示
- **已完成约定归档**：按时间/类型/关系分类
- **模型助手入口**：自然语言输入，生成草稿约定
- **关系管理**：添加/编辑联系人关系标签

### 5. 通知中心
- **系统提醒**：执行时间提醒、到期提醒、见证人反馈提醒
- **历史通知查看**

## 新增核心功能模块

### 7. 证据中心页面
- **上传证据界面**：
  - 相机/相册快速选择
  - 实时滤镜和时间戳添加
  - 语音录制界面（波形显示）
  - 位置选择和确认
- **证据历史**：时间轴展示所有上传的证据
- **审核状态**：显示证据的审核进度和结果
- **申诉入口**：对审核结果不满意时的申诉通道

### 8. 验证与仲裁页面
- **自动验证结果**：AI分析的执行完成度报告
- **见证人确认界面**：见证人查看证据并给出判断
- **争议处理中心**：
  - 双方陈述界面
  - 证据补充提交
  - 第三方仲裁申请
- **最终结果公示**：约定完成情况的正式结论
- **精简界面元素**：重视操作效率
- **微信内通知能力**：模板消息推送

## 功能补充与优化建议

### 核心功能增强

#### 约定状态管理
- **暂停/恢复约定**：临时有事无法执行时的灵活处理
- **约定延期申请**：需见证人同意的延期机制
- **违约处理流程**：自动标记、申诉渠道、后果设定
- **到期验证机制**：
  - 自动检查打卡记录完整性
  - 见证人确认环节（重要约定）
  - 证据审查系统（AI辅助+人工复审）
  - 争议处理流程（申诉、重新评估）

#### 证据管理系统
- **多元化证据类型**：
  - 图片证据：时间戳、地理位置、防篡改水印
  - 视频短片：15秒内动态证明
  - 语音记录：情感化表达，增加真实性
  - 文字日记：详细记录执行过程和感受
  - 第三方数据：运动APP、学习APP等数据同步
- **证据验证机制**：
  - AI智能识别：图片内容是否符合约定要求
  - 时间校验：是否在规定时间内上传
  - 地点验证：特定约定需要的位置确认
  - 见证人审核：重要证据的人工确认环节
- **互相督促功能**：参与人之间的轻量级提醒
- **庆祝仪式**：约定完成后的小动画、徽章系统
- **见证人评价体系**：可信度积分机制

#### 数据统计与激励
- **个人执行力报告**：完成率、连续打卡天数
- **约定类型偏好分析**
- **成长轨迹可视化**：月度/年度总结

### 交互体验优化

#### 智能化提升
- **个性化模板推荐**：基于历史数据分析
- **智能提醒时间建议**：根据用户活跃时段
- **约定冲突检测**：时间重叠提醒

#### 操作便捷性
- **语音输入**：创建约定
- **快速复制功能**：复制历史约定
- **批量操作**：同时打卡多个约定
- **桌面小组件**：显示今日待办约定

### 小程序特色功能

#### 微信生态整合
- **分享约定卡片**：微信群/朋友圈分享
- **微信好友邀请**：直接邀请为见证人
- **小程序码生成**：支持线下约定场景

#### 隐私与安全
- **约定可见性设置**：公开/私密/仅见证人
- **敏感信息加密存储**
- **账号注销与数据清理**

### 边界场景处理

#### 异常情况处理
- **离线缓存机制**：网络断线时的本地存储
- **邀请拒绝处理**：见证人拒绝邀请的流程
- **多人约定管理**：部分参与者退出的应对

#### 用户引导
- **新用户引导流程**：空状态设计
- **功能使用提示**：tooltips引导
- **常见问题FAQ**：帮助页面

### 运营与留存

#### 内容生态
- **约定模板库**：持续更新机制
- **用户原创模板**：分享功能
- **热门约定排行榜**：社区化运营

## 关键业务流程设计

### 证据上传与验证流程
1. **上传阶段**
   - 用户选择证据类型（必选/可选）
   - 系统自动添加时间戳和位置信息
   - AI预检查：内容相关性、图片质量等
   - 即时反馈：上传成功/失败/需要补充

2. **验证阶段**
   - 自动验证：时间、地点、内容匹配度
   - 见证人确认：重要约定需要见证人审核
   - AI辅助判断：结合历史数据评估真实性
   - 异常标记：可疑证据进入人工审核队列

3. **争议处理**
   - 申诉提交：不满验证结果可申请重审
   - 证据补充：提供更多支持材料
   - 第三方仲裁：引入平台客服或专业仲裁员
   - 最终裁决：给出约定执行的最终结论

### 到期约定完成度评估
1. **数据收集**
   - 打卡记录完整性统计
   - 证据质量和数量评估
   - 执行时间规律性分析
   - 参与者互动频率统计

2. **智能评分**
   - 基础完成度：打卡次数/要求次数
   - 质量加分：证据丰富度、真实性
   - 一致性评分：执行时间稳定性
   - 互动加分：参与者间的相互鼓励

3. **结果确认**
   - 系统初步判定完成/未完成
   - 见证人最终确认（重要约定）
   - 争议处理机制启动（如有异议）
   - 成就解锁和奖励发放

### 关系分组与模板匹配
1. **关系识别**
   - 通讯录分析：姓名备注关键词识别
   - 用户手动标记：主动设置关系类型
   - 行为模式分析：约定类型偏好推断
   - 社交网络分析：共同好友关系推断

2. **模板推荐**
   - 关系类型过滤：只显示适配的模板类别
   - 个性化排序：基于历史偏好和成功率
   - 时间智能：考虑季节、节假日等因素
   - 协同过滤：相似用户群体的热门选择

### 端侧AI集成
- 约定内容智能补全
- 个性化推荐算法
- 自然语言处理

### 微信小程序特性
- 模板消息推送
- 微信登录授权
- 分享到微信生态

### 数据存储与同步
- 本地缓存策略
- 云端数据同步
- 隐私数据加密

## 产品迭代建议

### MVP版本（第一版）
- 基础约定创建、执行、打卡功能
- 简单的模板系统和关系识别
- 基础证据上传（图片+文字）
- 基础提醒功能

### 增强版本（第二版）
- AI助手功能和智能推荐
- 完整的见证人系统
- 多样化证据类型支持
- 社交互动功能

### 完整版本（第三版）
- 高级验证和仲裁系统
- 数据分析与个性化报告
- 完善的激励体系和内容生态
- 跨平台同步和API开放

## 结语
小约定App的核心价值在于将日常生活中的"口头约定"结构化，通过技术手段提升执行力和信任度。产品设计需要平衡功能完整性与操作简便性，特别是在小程序环境下更要注重用户体验的流畅性。